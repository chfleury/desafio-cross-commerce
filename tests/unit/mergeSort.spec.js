const MergeSort = require('../../src/algorithms/mergeSort');

const createTinyArray = () => [1.3, 4.3, 41.4, 5.154];

const createSortedTinyArray = () => [1.3, 4.3, 5.154, 41.4];
const createLargeArray = () => [
  0.33266260662611724, 0.4723852910143786, 0.13476890401949598,
  0.5455674458956566, 0.3432732783765371, 0.16919257517267855,
  0.46622791253277723, 0.4737161857190606, 0.7507729088466839,
  0.7037178322839728, 0.12799743820996978, 0.8612200506816623,
  0.5903083513318165, 0.7250837085305982, 0.18338048547428712,
  0.28707145439106696, 0.09310561341874724, 0.26323678971387915,
  0.935774670108706, 0.5474031642039884, 0.7627947201777799, 0.4459902213581346,
  0.9254712904327863, 0.6375220248977276, 0.9079372401637569,
  0.6927197845834341, 0.8186738995914644, 0.15664542284993338,
  0.005661470139598029, 0.11809148054341351, 0.458753252497456,
  0.25425481287327656, 0.7379112277890802, 0.5655140255147053,
  0.012597363945405074, 0.20288415288923217, 0.7026213716865882,
  0.725682634482442, 0.81281559409406, 0.9078500303500565, 0.055526314743300755,
  0.423856868687387, 0.30070125690352456, 0.2021172872490552,
  0.8076488170832197, 0.3516411034048421, 0.4137705632953324,
  0.1519411180767449, 0.34596231258286403, 0.1515504105761663,
  0.4460605485183626, 0.4376226600256108, 0.5363015729275341,
  0.7626198022671066, 0.47104670057322445, 0.6856171465820458,
  0.05979655883231075, 0.5115751538691218, 0.4701106556739917,
  0.06099777790258485, 0.2529698669467121, 0.7506466179593716,
  0.9669857342457414, 0.9087017360648335, 0.018789178634688795,
  0.20185624586755221, 0.8851932706796244, 0.7230693125545371,
  0.14640549921883692, 0.7374049091120178, 0.010512332163102489,
  0.6200538675867452, 0.8759166756978299, 0.22268349129592852,
  0.12214599770746513, 0.33910222730532663, 0.48253953548450323,
  0.6254274560885054, 0.4687639280604481, 0.46617499751058217,
  0.4306428659254756, 0.05851721587028495, 0.36064650779287283,
  0.19446341014751872, 0.4501704904493515, 0.17441510345850267,
  0.20211025962109527, 0.47455133251433235, 0.7227427711770189,
  0.4474863603489099, 0.7485503009962483, 0.3164129844011639,
  0.26569793685522325, 0.558204642526327, 0.5938084845115389,
  0.19194282031935064, 0.9141690463099928, 0.1952554264271925,
  0.4803328032037879, 0.8607582623726622,
];

const createSortedLargeArray = () => [
  0.005661470139598029, 0.010512332163102489, 0.012597363945405074,
  0.018789178634688795, 0.055526314743300755, 0.05851721587028495,
  0.05979655883231075, 0.06099777790258485, 0.09310561341874724,
  0.11809148054341351, 0.12214599770746513, 0.12799743820996978,
  0.13476890401949598, 0.14640549921883692, 0.1515504105761663,
  0.1519411180767449, 0.15664542284993338, 0.16919257517267855,
  0.17441510345850267, 0.18338048547428712, 0.19194282031935064,
  0.19446341014751872, 0.1952554264271925, 0.20185624586755221,
  0.20211025962109527, 0.2021172872490552, 0.20288415288923217,
  0.22268349129592852, 0.2529698669467121, 0.25425481287327656,
  0.26323678971387915, 0.26569793685522325, 0.28707145439106696,
  0.30070125690352456, 0.3164129844011639, 0.33266260662611724,
  0.33910222730532663, 0.3432732783765371, 0.34596231258286403,
  0.3516411034048421, 0.36064650779287283, 0.4137705632953324,
  0.423856868687387, 0.4306428659254756, 0.4376226600256108, 0.4459902213581346,
  0.4460605485183626, 0.4474863603489099, 0.4501704904493515, 0.458753252497456,
  0.46617499751058217, 0.46622791253277723, 0.4687639280604481,
  0.4701106556739917, 0.47104670057322445, 0.4723852910143786,
  0.4737161857190606, 0.47455133251433235, 0.4803328032037879,
  0.48253953548450323, 0.5115751538691218, 0.5363015729275341,
  0.5455674458956566, 0.5474031642039884, 0.558204642526327, 0.5655140255147053,
  0.5903083513318165, 0.5938084845115389, 0.6200538675867452,
  0.6254274560885054, 0.6375220248977276, 0.6856171465820458,
  0.6927197845834341, 0.7026213716865882, 0.7037178322839728,
  0.7227427711770189, 0.7230693125545371, 0.7250837085305982, 0.725682634482442,
  0.7374049091120178, 0.7379112277890802, 0.7485503009962483,
  0.7506466179593716, 0.7507729088466839, 0.7626198022671066,
  0.7627947201777799, 0.8076488170832197, 0.81281559409406, 0.8186738995914644,
  0.8607582623726622, 0.8612200506816623, 0.8759166756978299,
  0.8851932706796244, 0.9078500303500565, 0.9079372401637569,
  0.9087017360648335, 0.9141690463099928, 0.9254712904327863, 0.935774670108706,
  0.9669857342457414,
];

describe('Merge Sort', () => {
  test('should call sort function with correct parameters', () => {
    const sortSpy = jest.spyOn(MergeSort, 'sort');
    const params = createTinyArray();

    MergeSort.sort(params);

    expect(sortSpy).toHaveBeenCalledWith(params);
  });

  test('should sucessfuly sort the array', () => {
    let testOne = createTinyArray();
    let testTwo = createLargeArray();

    MergeSort.sort(testOne);
    MergeSort.sort(testTwo);

    expect(testOne).toEqual(createSortedTinyArray());
    expect(testTwo).toEqual(createSortedLargeArray());
  });

  test('should call merge function with correct parameters', () => {
    const mergeSpy = jest.spyOn(MergeSort, 'merge');
    const params = createSortedTinyArray();

    MergeSort.merge(params, 0, 1, 3);

    expect(mergeSpy).toHaveBeenCalledWith(params, 0, 1, 3);
  });

  test('should sucessfuly merge the arrays', () => {
    let array = createSortedTinyArray();
    array = [...array, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]];

    MergeSort.merge(array, 0, 3, 13);

    expect(array).toEqual([
      1, 1.3, 2, 3, 4, 4.3, 5, 5.154, 6, 7, 8, 9, 10, 41.4,
    ]);
  });
});
